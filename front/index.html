<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cyber Escape - Dossier de conception</title>
    <link rel="stylesheet" href="src/styles.css" />
    <style>
      /* S'assurer que l'Ã©cran d'accueil est visible au chargement */
      #welcome-screen {
        display: flex !important;
        z-index: 10 !important;
      }
      #desktop-screen {
        z-index: 1 !important;
      }

      /* Quand l'Ã©cran bureau est actif, il doit Ãªtre au-dessus */
      #desktop-screen.active {
        z-index: 20 !important;
      }

      /* L'Ã©cran de victoire doit Ãªtre au-dessus de tout */
      #victory-screen.active {
        z-index: 50 !important;
      }

      /* L'Ã©cran d'accueil ne doit pas Ãªtre au-dessus de la victoire */
      #welcome-screen:not(.active) {
        z-index: 1 !important;
        display: none !important;
      }

      /* Forcer la fermeture de la modale de dÃ©verrouillage */
      .modal.force-hidden {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
      }
    </style>
  </head>
  <body>
    <!-- Ã‰cran d'accueil -->
    <div id="welcome-screen" class="screen active">
      <div class="welcome-container">
        <div class="logo">
          <h1>ğŸ”’ Cyber Escape</h1>
          <p class="subtitle">Dossier de conception</p>
        </div>
        <div class="welcome-content">
          <p class="description">
            Un hacker a verrouillÃ© le rÃ©seau du lycÃ©e !<br />
            Trouve les indices cachÃ©s pour dÃ©verrouiller le systÃ¨me.
          </p>
          <div class="welcome-buttons">
            <button id="start-btn" class="btn btn-primary">DÃ©marrer</button>
            <button id="help-btn" class="btn btn-secondary">
              Comment jouer
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Ã‰cran bureau -->
    <div id="desktop-screen" class="screen">
      <div class="desktop-header">
        <div class="timer">
          <span id="timer-display">15:00</span>
        </div>
        <button id="unlock-btn" class="btn btn-unlock" disabled>
          ğŸ”“ DÃ©verrouiller
        </button>
        <button
          onclick="showScreen('welcome')"
          style="
            background: #2196f3;
            color: white;
            padding: 5px 10px;
            margin-left: 10px;
            border: none;
            border-radius: 3px;
          "
        >
          ğŸ  Accueil
        </button>
      </div>

      <div class="desktop-background">
        <div class="desktop-icons">
          <div class="desktop-icon" data-puzzle="documents">
            <div class="icon">ğŸ“</div>
            <span>Documents</span>
            <div class="puzzle-status" id="doc-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="images">
            <div class="icon">ğŸ–¼ï¸</div>
            <span>Images</span>
            <div class="puzzle-status" id="img-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="mail">
            <div class="icon">ğŸ“§</div>
            <span>Mail</span>
            <div class="puzzle-status" id="mail-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="cipher">
            <div class="icon">ğŸ”</div>
            <span>Chiffrement</span>
            <div class="puzzle-status" id="cipher-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="usb">
            <div class="icon">ğŸ’¾</div>
            <span>USB</span>
            <div class="puzzle-status" id="usb-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="update">
            <div class="icon">ğŸ”„</div>
            <span>Mise Ã  jour</span>
            <div class="puzzle-status" id="update-status"></div>
          </div>
          <div class="desktop-icon" data-puzzle="social">
            <div class="icon">ğŸ­</div>
            <span>IngÃ©nierie sociale</span>
            <div class="puzzle-status" id="social-status"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modales des Ã©nigmes -->
    <div id="puzzle-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="puzzle-title">Ã‰nigme</h2>
          <div class="modal-controls">
            <button id="hint-btn" class="btn btn-hint">ğŸ’¡ Indice</button>
            <button id="close-puzzle" class="btn btn-close">âœ•</button>
          </div>
        </div>
        <div class="modal-body">
          <!-- Contenu dynamique des Ã©nigmes -->
          <div id="puzzle-content"></div>
        </div>
      </div>
    </div>

    <!-- Modale de dÃ©verrouillage -->
    <div id="unlock-modal" class="modal">
      <div class="modal-content unlock-modal">
        <div class="modal-header">
          <h2>ğŸ”“ DÃ©verrouiller le rÃ©seau</h2>
          <button id="close-unlock" class="btn btn-close">âœ•</button>
        </div>
        <div class="modal-body">
          <p>Entrez le code Ã  7 chiffres :</p>
          <div class="code-input">
            <input
              type="text"
              id="code-input"
              maxlength="7"
              placeholder="0000000"
            />
          </div>
          <div class="code-display">
            <div class="code-digit" data-digit="1">_</div>
            <div class="code-digit" data-digit="2">_</div>
            <div class="code-digit" data-digit="3">_</div>
            <div class="code-digit" data-digit="4">_</div>
            <div class="code-digit" data-digit="5">_</div>
            <div class="code-digit" data-digit="6">_</div>
            <div class="code-digit" data-digit="7">_</div>
          </div>
          <button id="submit-code" class="btn btn-primary">Valider</button>
        </div>
      </div>
    </div>

    <!-- Ã‰cran de victoire -->
    <div id="victory-screen" class="screen">
      <div class="victory-container">
        <div class="victory-content">
          <h1>ğŸ‰ FÃ©licitations !</h1>
          <p class="victory-message">
            Vous avez dÃ©verrouillÃ© le rÃ©seau du lycÃ©e !
          </p>
          <div class="victory-stats">
            <div class="stat">
              <span class="stat-label">Temps restant :</span>
              <span id="time-remaining">--:--</span>
            </div>
            <div class="stat">
              <span class="stat-label">Indices utilisÃ©s :</span>
              <span id="hints-used">0/3</span>
            </div>
          </div>
          <div class="educational-message">
            <h3>ğŸ’¡ Message pÃ©dagogique</h3>
            <p>
              Vous venez de dÃ©couvrir les bases de la cybersÃ©curitÃ© !<br />
              Restez vigilant face aux emails suspects, vÃ©rifiez toujours les
              sources,<br />
              et gardez un esprit critique sur le web.
            </p>
          </div>
          <button id="play-again" class="btn btn-primary">Rejouer</button>
        </div>
      </div>
    </div>

    <!-- Modale d'aide -->
    <div id="help-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Comment jouer</h2>
          <button id="close-help" class="btn btn-close">âœ•</button>
        </div>
        <div class="modal-body">
          <div class="help-content">
            <h3>ğŸ¯ Objectif</h3>
            <p>
              Trouvez 7 indices cachÃ©s dans les dossiers pour composer un code Ã 
              7 chiffres.
            </p>

            <h3>ğŸ“ Documents</h3>
            <p>Lisez le rapport et trouvez le mot cachÃ© daans ce texte.</p>

            <h3>ğŸ–¼ï¸ Images</h3>
            <p>
              RÃ©glez la luminositÃ© et le contraste pour rÃ©vÃ©ler le message cachÃ©
              dans l'image.
            </p>

            <h3>ğŸ“§ Mail</h3>
            <p>
              Identifiez les X erreurs dans l'email suspect pour obtenir
              l'indice final.
            </p>

            <h3>ğŸ” Chiffrement</h3>
            <p>
              DÃ©chiffrez le message codÃ© en utilisant le chiffrement de CÃ©sar
              pour obtenir le dernier chiffre du code.
            </p>

            <h3>ğŸ’¾ USB</h3>
            <p>
              Analysez les fichiers sur les clÃ©s USB pour identifier les
              Ã©lÃ©ments les plus critiques pour la sÃ©curitÃ©.
            </p>

            <h3>ğŸ”„ Mise Ã  jour</h3>
            <p>
              Identifiez les versions logicielles, les vrais patches de sÃ©curitÃ©
              et les serveurs compromis dans les logs.
            </p>

            <h3>ğŸ­ IngÃ©nierie sociale</h3>
            <p>
              DÃ©tectez les tentatives de manipulation psychologique pour obtenir
              des codes d'accÃ¨s et des informations sensibles.
            </p>

            <h3>â° Temps</h3>
            <p>Vous avez 15 minutes pour rÃ©soudre toutes les Ã©nigmes !</p>
          </div>
        </div>
      </div>
    </div>

    <script src="src/main.js"></script>
    <script src="src/puzzles/doc.js"></script>
    <script src="src/puzzles/image.js"></script>
    <script src="src/puzzles/mail.js"></script>
    <script src="src/puzzles/cipher.js"></script>
    <script src="src/puzzles/usb.js"></script>
    <script src="src/puzzles/update.js"></script>
    <script src="src/puzzles/social.js"></script>
  </body>
</html>
